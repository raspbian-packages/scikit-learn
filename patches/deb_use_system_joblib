From: Yaroslav Halchenko <debian@onerussian.com>
Subject: use system-wide joblib and do not attempt to install joblib/test

 Relies on DFSG-ed sources with no joblib present

--- /dev/null
+++ b/sklearn/externals/joblib/__init__.py
@@ -0,0 +1,4 @@
+# yoh: use system-wide joblib
+# replace local name space with the one from system-wide joblib
+import joblib
+locals().update(joblib.__dict__)
--- a/sklearn/metrics/pairwise.py
+++ b/sklearn/metrics/pairwise.py
@@ -24,7 +24,7 @@ from ..utils.extmath import row_norms, s
 from ..preprocessing import normalize
 from ..externals.joblib import Parallel
 from ..externals.joblib import delayed
-from ..externals.joblib.parallel import cpu_count
+from ..externals.joblib import parallel
 
 from .pairwise_fast import _chi2_kernel_fast, _sparse_manhattan
 
@@ -1068,7 +1068,7 @@ def _parallel_pairwise(X, Y, func, n_job
     """Break the pairwise matrix in n_jobs even slices
     and compute them in parallel"""
     if n_jobs < 0:
-        n_jobs = max(cpu_count() + 1 + n_jobs, 1)
+        n_jobs = max(parallel.cpu_count() + 1 + n_jobs, 1)
 
     if Y is None:
         Y = X
